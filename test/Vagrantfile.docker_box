Vagrant.configure("2") do |config|
  # Get unique suffix from environment variable to avoid container name conflicts
  vm_suffix = ENV['INSPECT_VM_SUFFIX'] || ''

  config.vm.define "default#{vm_suffix}" do |vm|
    vm.vm.provider "docker" do |d|
      d.image = "ubuntu:22.04"
      d.has_ssh = true # allow `vagrant ssh -c ...`
      d.remains_running = true
      d.privileged = true
      d.cmd = ["sleep", "infinity"]
    end
  end
end
